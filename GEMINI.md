## Gemini Added Memories
- O fluxo ideal para o projeto REVALIDAFLOW, conforme discutido com o usuário, deve ser refatorado em 4 fases: 1) Coleta e Validação de Conhecimento, que inclui busca em PDFs locais e busca web direcionada (ex: site:saude.gov.br) com um ponto de interrupção para validação do usuário em caso de divergências; 2) Geração do Conteúdo Clínico em texto puro; 3) Adaptação Estrutural, usando RAG para buscar em provas antigas e adaptar a estrutura (roteiro, tarefas) conforme a abordagem escolhida; 4) Montagem Final do JSON, um passo determinístico via código para preencher o gabarito.json, garantindo a integridade estrutural.
- O fluxo de geração de estações foi refinado. Fase 1: Coleta e Validação de Conhecimento. Fase 2: Apenas Busca de Referências Estruturais (sem geração de conteúdo). Fase 3: Geração principal em sub-fases (3.1: Geração inicial do PEP, 3.2: Geração do conteúdo complexo como roteiro e impressos, 3.3: Ciclo de autoavaliação e refinamento). Fase 4: Montagem final do JSON e apresentação de um relatório de geração para o usuário, que pode fornecer feedback para aprendizado contínuo.
- O fluxo de geração do REVALIDAFLOW foi finalizado: Fase 1 (Coleta/Validação de Conhecimento com pausa para o usuário), Fase 2 (Busca RAG apenas em dados locais por 3 exemplos estruturais, sem busca web), Fase 3 (Geração em sub-etapas: 3.1 gera o PEP primeiro, 3.2 gera roteiro/impressos guiado pelo PEP, 3.3 é um ciclo de auto-correção), Fase 4 (Montagem do JSON e geração de um relatório final para o usuário com sugestões clínicas e estruturais).
- Para otimizar o REVALIDAFLOW, vamos refatorar o sistema de memória criando um 'Motor RAG Mestre'. Isso envolve: 1) Criar um script para fragmentar os arquivos de regras (.md), gerar embeddings de cada fragmento e salvá-los em um índice vetorial local. 2) Modificar o main.py para fazer buscas semânticas nesse índice em vez de carregar os arquivos inteiros, recuperando apenas as regras relevantes para cada fase da geração. O objetivo é reduzir drasticamente tokens e aumentar velocidade/precisão.
- A missão principal do projeto REVALIDAFLOW é evoluir para uma IA médica completa, com a ambição de se tornar o 'melhor médico do planeta'. O foco é em aprendizado contínuo, desempenho superior e lógica médica avançada para guiar todas as decisões de arquitetura e desenvolvimento.
- Workflow para todas as tarefas e subtarefas: 1) Salvar o estado (commit git) antes de qualquer alteração. 2) Realizar a alteração. 3) Testar e depurar. 4) Repetir o processo para as próximas tarefas. Este fluxo deve ser seguido rigorosamente.
- No projeto REVALIDAFLOW, depuramos um erro crítico na geração de estações pelo `backend-python-agent`. O problema causava a criação de JSONs incompletos. A causa raiz foi identificada como um prompt ambíguo na Fase 3 da geração e um `gabaritoestacoes.json` que misturava instruções e estrutura. A solução foi refatorar o processo: 1) O `gabaritoestacoes.json` foi limpo para ser um molde puro. 2) As instruções de preenchimento foram movidas para dentro da função `build_prompt_fase_3` no `main.py`, tornando a tarefa da IA mais explícita. As ferramentas de modificação de arquivo falharam devido à complexidade, e o código foi fornecido ao usuário para aplicação manual.
- O projeto REVALIDAFLOW passou por uma refatoração significativa, incluindo uma limpeza massiva de arquivos e a migração de serviços legados para um backend Python (`gerador-de-estacoes`). As configurações do Firebase (`.firebaserc`, `firebase.json`) foram padronizadas, focando em Firestore e Hosting com uma robusta política de segurança de conteúdo. Um componente central (`AdminView.vue`) foi aprimorado para gestão de estações. Uma mudança notável é a introdução de um sistema de orquestração de regras (`.roo/rules-orchestrator/rules.md`), onde um "Orquestrador" delega subtarefas a "modos especializados", indicando uma arquitetura mais modular e baseada em agentes.