// src/plugins/socket.js
import { backendUrl } from "/src/utils/backendUrl.js"
import { io } from "/node_modules/.vite/deps/socket__io-client.js?v=48017b6c"

let socket

function connectSocket(params = {}) {
  if (socket) return socket
  
  
  socket = io(backendUrl, {
    autoConnect: false, // Conectar manualmente para melhor controle
    transports: ['websocket', 'polling'], // Adiciona polling como fallback
    auth: params, // Envia os par칙metros corretamente
    timeout: 10000, // Timeout reduzido para 10 segundos
    reconnection: true, // Habilita reconex칚o autom치tica
    reconnectionAttempts: 3, // M치ximo 3 tentativas
    reconnectionDelay: 1000, // Delay inicial de 1 segundo
    maxReconnectionAttempts: 3 // Limite m치ximo de tentativas
  })
  
  // Event listeners para debug
  socket.on('connect', () => {
  })
  
  socket.on('disconnect', () => {
  })
  
  socket.on('connect_error', (error) => {
    console.error('游뛂 Erro de conex칚o Socket:', error)
  })
  
  return socket
}

export { connectSocket }


//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNvY2tldC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBzcmMvcGx1Z2lucy9zb2NrZXQuanNcbmltcG9ydCB7IGJhY2tlbmRVcmwgfSBmcm9tIFwiL3NyYy91dGlscy9iYWNrZW5kVXJsLmpzXCJcbmltcG9ydCB7IGlvIH0gZnJvbSBcIi9ub2RlX21vZHVsZXMvLnZpdGUvZGVwcy9zb2NrZXRfX2lvLWNsaWVudC5qcz92PTQ4MDE3YjZjXCJcblxubGV0IHNvY2tldFxuXG5mdW5jdGlvbiBjb25uZWN0U29ja2V0KHBhcmFtcyA9IHt9KSB7XG4gIGlmIChzb2NrZXQpIHJldHVybiBzb2NrZXRcbiAgXG4gIFxuICBzb2NrZXQgPSBpbyhiYWNrZW5kVXJsLCB7XG4gICAgYXV0b0Nvbm5lY3Q6IGZhbHNlLCAvLyBDb25lY3RhciBtYW51YWxtZW50ZSBwYXJhIG1lbGhvciBjb250cm9sZVxuICAgIHRyYW5zcG9ydHM6IFsnd2Vic29ja2V0JywgJ3BvbGxpbmcnXSwgLy8gQWRpY2lvbmEgcG9sbGluZyBjb21vIGZhbGxiYWNrXG4gICAgYXV0aDogcGFyYW1zLCAvLyBFbnZpYSBvcyBwYXLDom1ldHJvcyBjb3JyZXRhbWVudGVcbiAgICB0aW1lb3V0OiAxMDAwMCwgLy8gVGltZW91dCByZWR1emlkbyBwYXJhIDEwIHNlZ3VuZG9zXG4gICAgcmVjb25uZWN0aW9uOiB0cnVlLCAvLyBIYWJpbGl0YSByZWNvbmV4w6NvIGF1dG9tw6F0aWNhXG4gICAgcmVjb25uZWN0aW9uQXR0ZW1wdHM6IDMsIC8vIE3DoXhpbW8gMyB0ZW50YXRpdmFzXG4gICAgcmVjb25uZWN0aW9uRGVsYXk6IDEwMDAsIC8vIERlbGF5IGluaWNpYWwgZGUgMSBzZWd1bmRvXG4gICAgbWF4UmVjb25uZWN0aW9uQXR0ZW1wdHM6IDMgLy8gTGltaXRlIG3DoXhpbW8gZGUgdGVudGF0aXZhc1xuICB9KVxuICBcbiAgLy8gRXZlbnQgbGlzdGVuZXJzIHBhcmEgZGVidWdcbiAgc29ja2V0Lm9uKCdjb25uZWN0JywgKCkgPT4ge1xuICB9KVxuICBcbiAgc29ja2V0Lm9uKCdkaXNjb25uZWN0JywgKCkgPT4ge1xuICB9KVxuICBcbiAgc29ja2V0Lm9uKCdjb25uZWN0X2Vycm9yJywgKGVycm9yKSA9PiB7XG4gICAgY29uc29sZS5lcnJvcign8J+aqyBFcnJvIGRlIGNvbmV4w6NvIFNvY2tldDonLCBlcnJvcilcbiAgfSlcbiAgXG4gIHJldHVybiBzb2NrZXRcbn1cblxuZXhwb3J0IHsgY29ubmVjdFNvY2tldCB9XG5cbiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxFQUFFO0FBQ3hCLE1BQU0sQ0FBQyxDQUFDLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsVUFBVSxDQUFDLEVBQUUsQ0FBQztBQUNyRCxNQUFNLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxZQUFZLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxNQUFNLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUM7QUFDN0U7QUFDQSxHQUFHLENBQUMsTUFBTTtBQUNWO0FBQ0EsUUFBUSxDQUFDLGFBQWEsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUNyQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsTUFBTSxDQUFDLE1BQU07QUFDM0IsQ0FBQyxDQUFDO0FBQ0YsQ0FBQyxDQUFDO0FBQ0YsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUM7QUFDM0IsQ0FBQyxDQUFDLENBQUMsQ0FBQyxXQUFXLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxR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