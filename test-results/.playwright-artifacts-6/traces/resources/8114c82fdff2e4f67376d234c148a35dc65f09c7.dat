// Composables
import { useProxiedModel } from "/node_modules/vuetify/lib/composables/proxiedModel.mjs?v=48017b6c"; // Utilities
import { computed, inject, onBeforeUnmount, onMounted, onUpdated, provide, reactive, toRef, unref, watch } from "/node_modules/.vite/deps/vue.js?v=48017b6c";
import { consoleWarn, deepEqual, findChildrenWithProvide, getCurrentInstance, getUid, propsFactory, wrapInArray } from "/node_modules/vuetify/lib/util/index.mjs?v=48017b6c"; // Types
export const makeGroupProps = propsFactory({
  modelValue: {
    type: null,
    default: undefined
  },
  multiple: Boolean,
  mandatory: [Boolean, String],
  max: Number,
  selectedClass: String,
  disabled: Boolean
}, 'group');
export const makeGroupItemProps = propsFactory({
  value: null,
  disabled: Boolean,
  selectedClass: String
}, 'group-item');

// Composables

export function useGroupItem(props, injectKey) {
  let required = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;
  const vm = getCurrentInstance('useGroupItem');
  if (!vm) {
    throw new Error('[Vuetify] useGroupItem composable must be used inside a component setup function');
  }
  const id = getUid();
  provide(Symbol.for(`${injectKey.description}:id`), id);
  const group = inject(injectKey, null);
  if (!group) {
    if (!required) return group;
    throw new Error(`[Vuetify] Could not find useGroup injection with symbol ${injectKey.description}`);
  }
  const value = toRef(props, 'value');
  const disabled = computed(() => !!(group.disabled.value || props.disabled));
  group.register({
    id,
    value,
    disabled
  }, vm);
  onBeforeUnmount(() => {
    group.unregister(id);
  });
  const isSelected = computed(() => {
    return group.isSelected(id);
  });
  const isFirst = computed(() => {
    return group.items.value[0].id === id;
  });
  const isLast = computed(() => {
    return group.items.value[group.items.value.length - 1].id === id;
  });
  const selectedClass = computed(() => isSelected.value && [group.selectedClass.value, props.selectedClass]);
  watch(isSelected, value => {
    vm.emit('group:selected', {
      value
    });
  }, {
    flush: 'sync'
  });
  return {
    id,
    isSelected,
    isFirst,
    isLast,
    toggle: () => group.select(id, !isSelected.value),
    select: value => group.select(id, value),
    selectedClass,
    value,
    disabled,
    group
  };
}
export function useGroup(props, injectKey) {
  let isUnmounted = false;
  const items = reactive([]);
  const selected = useProxiedModel(props, 'modelValue', [], v => {
    if (v == null) return [];
    return getIds(items, wrapInArray(v));
  }, v => {
    const arr = getValues(items, v);
    return props.multiple ? arr : arr[0];
  });
  const groupVm = getCurrentInstance('useGroup');
  function register(item, vm) {
    // Is there a better way to fix this typing?
    const unwrapped = item;
    const key = Symbol.for(`${injectKey.description}:id`);
    const children = findChildrenWithProvide(key, groupVm?.vnode);
    const index = children.indexOf(vm);
    if (unref(unwrapped.value) == null) {
      unwrapped.value = index;
      unwrapped.useIndexAsValue = true;
    }
    if (index > -1) {
      items.splice(index, 0, unwrapped);
    } else {
      items.push(unwrapped);
    }
  }
  function unregister(id) {
    if (isUnmounted) return;

    // TODO: re-evaluate this line's importance in the future
    // should we only modify the model if mandatory is set.
    // selected.value = selected.value.filter(v => v !== id)

    forceMandatoryValue();
    const index = items.findIndex(item => item.id === id);
    items.splice(index, 1);
  }

  // If mandatory and nothing is selected, then select first non-disabled item
  function forceMandatoryValue() {
    const item = items.find(item => !item.disabled);
    if (item && props.mandatory === 'force' && !selected.value.length) {
      selected.value = [item.id];
    }
  }
  onMounted(() => {
    forceMandatoryValue();
  });
  onBeforeUnmount(() => {
    isUnmounted = true;
  });
  onUpdated(() => {
    // #19655 update the items that use the index as the value.
    for (let i = 0; i < items.length; i++) {
      if (items[i].useIndexAsValue) {
        items[i].value = i;
      }
    }
  });
  function select(id, value) {
    const item = items.find(item => item.id === id);
    if (value && item?.disabled) return;
    if (props.multiple) {
      const internalValue = selected.value.slice();
      const index = internalValue.findIndex(v => v === id);
      const isSelected = ~index;
      value = value ?? !isSelected;

      // We can't remove value if group is
      // mandatory, value already exists,
      // and it is the only value
      if (isSelected && props.mandatory && internalValue.length <= 1) return;

      // We can't add value if it would
      // cause max limit to be exceeded
      if (!isSelected && props.max != null && internalValue.length + 1 > props.max) return;
      if (index < 0 && value) internalValue.push(id);else if (index >= 0 && !value) internalValue.splice(index, 1);
      selected.value = internalValue;
    } else {
      const isSelected = selected.value.includes(id);
      if (props.mandatory && isSelected) return;
      selected.value = value ?? !isSelected ? [id] : [];
    }
  }
  function step(offset) {
    // getting an offset from selected value obviously won't work with multiple values
    if (props.multiple) consoleWarn('This method is not supported when using "multiple" prop');
    if (!selected.value.length) {
      const item = items.find(item => !item.disabled);
      item && (selected.value = [item.id]);
    } else {
      const currentId = selected.value[0];
      const currentIndex = items.findIndex(i => i.id === currentId);
      let newIndex = (currentIndex + offset) % items.length;
      let newItem = items[newIndex];
      while (newItem.disabled && newIndex !== currentIndex) {
        newIndex = (newIndex + offset) % items.length;
        newItem = items[newIndex];
      }
      if (newItem.disabled) return;
      selected.value = [items[newIndex].id];
    }
  }
  const state = {
    register,
    unregister,
    selected,
    select,
    disabled: toRef(props, 'disabled'),
    prev: () => step(items.length - 1),
    next: () => step(1),
    isSelected: id => selected.value.includes(id),
    selectedClass: computed(() => props.selectedClass),
    items: computed(() => items),
    getItemIndex: value => getItemIndex(items, value)
  };
  provide(injectKey, state);
  return state;
}
function getItemIndex(items, value) {
  const ids = getIds(items, [value]);
  if (!ids.length) return -1;
  return items.findIndex(item => item.id === ids[0]);
}
function getIds(items, modelValue) {
  const ids = [];
  modelValue.forEach(value => {
    const item = items.find(item => deepEqual(value, item.value));
    const itemByIndex = items[value];
    if (item?.value != null) {
      ids.push(item.id);
    } else if (itemByIndex != null) {
      ids.push(itemByIndex.id);
    }
  });
  return ids;
}
function getValues(items, ids) {
  const values = [];
  ids.forEach(id => {
    const itemIndex = items.findIndex(item => item.id === id);
    if (~itemIndex) {
      const item = items[itemIndex];
      values.push(item.value != null ? item.value : itemIndex);
    }
  });
  return values;
}
                                  
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZ3JvdXAubWpzIiwibmFtZXMiOlsidXNlUHJveGllZE1vZGVsIiwiY29tcHV0ZWQiLCJpbmplY3QiLCJvbkJlZm9yZVVubW91bnQiLCJvbk1vdW50ZWQiLCJvblVwZGF0ZWQiLCJwcm92aWRlIiwicmVhY3RpdmUiLCJ0b1JlZiIsInVucmVmIiwid2F0Y2giLCJjb25zb2xlV2FybiIsImRlZXBFcXVhbCIsImZpbmRDaGlsZHJlbldpdGhQcm92aWRlIiwiZ2V0Q3VycmVudEluc3RhbmNlIiwiZ2V0VWlkIiwicHJvcHNGYWN0b3J5Iiwid3JhcEluQXJyYXkiLCJtYWtlR3JvdXBQcm9wcyIsIm1vZGVsVmFsdWUiLCJ0eXBlIiwiZGVmYXVsdCIsInVuZGVmaW5lZCIsIm11bHRpcGxlIiwiQm9vbGVhbiIsIm1hbmRhdG9yeSIsIlN0cmluZyIsIm1heCIsIk51bWJlciIsInNlbGVjdGVkQ2xhc3MiLCJkaXNhYmxlZCIsIm1ha2VHcm91cEl0ZW1Qcm9wcyIsInZhbHVlIiwidXNlR3JvdXBJdGVtIiwicHJvcHMiLCJpbmplY3RLZXkiLCJyZXF1aXJlZCIsImFyZ3VtZW50cyIsImxlbmd0aCIsInZtIiwiRXJyb3IiLCJpZCIsIlN5bWJvbCIsImZvciIsImRlc2NyaXB0aW9uIiwiZ3JvdXAiLCJyZWdpc3RlciIsInVucmVnaXN0ZXIiLCJpc1NlbGVjdGVkIiwiaXNGaXJzdCIsIml0ZW1zIiwiaXNMYXN0IiwiZW1pdCIsImZsdXNoIiwidG9nZ2xlIiwic2VsZWN0IiwidXNlR3JvdXAiLCJpc1VubW91bnRlZCIsInNlbGVjdGVkIiwidiIsImdldElkcyIsImFyciIsImdldFZhbHVlcyIsImdyb3VwVm0iLCJpdGVtIiwidW53cmFwcGVkIiwia2V5IiwiY2hpbGRyZW4iLCJ2bm9kZSIsImluZGV4IiwiaW5kZXhPZiIsInVzZUluZGV4QXNWYWx1ZSIsInNwbGljZSIsInB1c2giLCJmb3JjZU1hbmRhdG9yeVZhbHVlIiwiZmluZEluZGV4IiwiZmluZCIsImkiLCJpbnRlcm5hbFZhbHVlIiwic2xpY2UiLCJpbmNsdWRlcyIsInN0ZXAiLCJvZmZzZXQiLCJjdXJyZW50SWQiLCJjdXJyZW50SW5kZXgiLCJuZXdJbmRleCIsIm5ld0l0ZW0iLCJzdGF0ZSIsInByZXYiLCJuZXh0IiwiZ2V0SXRlbUluZGV4IiwiaWRzIiwiZm9yRWFjaCIsIml0ZW1CeUluZGV4IiwidmFsdWVzIiwiaXRlbUluZGV4Il0sInNvdXJjZXMiOlsiLi4vLi4vc3JjL2NvbXBvc2FibGVzL2dyb3VwLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvbXBvc2FibGVzXG5pbXBvcnQgeyB1c2VQcm94aWVkTW9kZWwgfSBmcm9tICcuL3Byb3hpZWRNb2RlbCdcblxuLy8gVXRpbGl0aWVzXG5pbXBvcnQgeyBjb21wdXRlZCwgaW5qZWN0LCBvbkJlZm9yZVVubW91bnQsIG9uTW91bnRlZCwgb25VcGRhdGVkLCBwcm92aWRlLCByZWFjdGl2ZSwgdG9SZWYsIHVucmVmLCB3YXRjaCB9IGZyb20gJ3Z1ZSdcbmltcG9ydCB7IGNvbnNvbGVXYXJuLCBkZWVwRXF1YWwsIGZpbmRDaGlsZHJlbldpdGhQcm92aWRlLCBnZXRDdXJyZW50SW5zdGFuY2UsIGdldFVpZCwgcHJvcHNGYWN0b3J5LCB3cmFwSW5BcnJheSB9IGZyb20gJ0AvdXRpbCdcblxuLy8gVHlwZXNcbmltcG9ydCB0eXBlIHsgQ29tcG9uZW50SW50ZXJuYWxJbnN0YW5jZSwgQ29tcHV0ZWRSZWYsIEV4dHJhY3RQcm9wVHlwZXMsIEluamVjdGlvbktleSwgUHJvcFR5cGUsIFJlZiwgVW53cmFwUmVmIH0gZnJvbSAndnVlJ1xuaW1wb3J0IHR5cGUgeyBFdmVudFByb3AgfSBmcm9tICdAL3V0aWwnXG5cbmV4cG9ydCBpbnRlcmZhY2UgR3JvdXBJdGVtIHtcbiAgaWQ6IG51bWJlclxuICB2YWx1ZTogUmVmPHVua25vd24+XG4gIGRpc2FibGVkOiBSZWY8Ym9vbGVhbiB8IHVuZGVmaW5lZD5cbiAgdXNlSW5kZXhBc1ZhbHVlPzogYm9vbGVhblxufVxuXG5leHBvcnQgaW50ZXJmYWNlIEdyb3VwUHJvcHMge1xuICBkaXNhYmxlZDogYm9vbGVhblxuICBtb2RlbFZhbHVlOiB1bmtub3duXG4gIG11bHRpcGxlPzogYm9vbGVhblxuICBtYW5kYXRvcnk/OiBib29sZWFuIHwgJ2ZvcmNlJyB8IHVuZGVmaW5lZFxuICBtYXg/OiBudW1iZXIgfCB1bmRlZmluZWRcbiAgc2VsZWN0ZWRDbGFzczogc3RyaW5nIHwgdW5kZWZpbmVkXG4gICdvblVwZGF0ZTptb2RlbFZhbHVlJzogRXZlbnRQcm9wPFt1bmtub3duXT4gfCB1bmRlZmluZWRcbn1cblxuZXhwb3J0IGludGVyZmFjZSBHcm91cFByb3ZpZGUge1xuICByZWdpc3RlcjogKGl0ZW06IEdyb3VwSXRlbSwgY21wOiBDb21wb25lbnRJbnRlcm5hbEluc3RhbmNlKSA9PiB2b2lkXG4gIHVucmVnaXN0ZXI6IChpZDogbnVtYmVyKSA9PiB2b2lkXG4gIHNlbGVjdDogKGlkOiBudW1iZXIsIHZhbHVlOiBib29sZWFuKSA9PiB2b2lkXG4gIHNlbGVjdGVkOiBSZWY8UmVhZG9ubHk8bnVtYmVyW10+PlxuICBpc1NlbGVjdGVkOiAoaWQ6IG51bWJlcikgPT4gYm9vbGVhblxuICBwcmV2OiAoKSA9PiB2b2lkXG4gIG5leHQ6ICgpID0+IHZvaWRcbiAgc2VsZWN0ZWRDbGFzczogUmVmPHN0cmluZyB8IHVuZGVmaW5lZD5cbiAgaXRlbXM6IENvbXB1dGVkUmVmPHtcbiAgICBpZDogbnVtYmVyXG4gICAgdmFsdWU6IHVua25vd25cbiAgICBkaXNhYmxlZDogYm9vbGVhbiB8IHVuZGVmaW5lZFxuICB9W10+XG4gIGRpc2FibGVkOiBSZWY8Ym9vbGVhbiB8IHVuZGVmaW5lZD5cbiAgZ2V0SXRlbUluZGV4OiAodmFsdWU6IHVua25vd24pID0+IG51bWJlclxufVxuXG5leHBvcnQgaW50ZXJmYWNlIEdyb3VwSXRlbVByb3ZpZGUge1xuICBpZDogbnVtYmVyXG4gIGlzU2VsZWN0ZWQ6IFJlZjxib29sZWFuPlxuICBpc0ZpcnN0OiBSZWY8Ym9vbGVhbj5cbiAgaXNMYXN0OiBSZWY8Ym9vbGVhbj5cbiAgdG9nZ2xlOiAoKSA9PiB2b2lkXG4gIHNlbGVjdDogKHZhbHVlOiBib29sZWFuKSA9PiB2b2lkXG4gIHNlbGVjdGVkQ2xhc3M6IFJlZjwoc3RyaW5nIHwgdW5kZWZpbmVkKVtdIHwgZmFsc2U+XG4gIHZhbHVlOiBSZWY8dW5rbm93bj5cbiAgZGlzYWJsZWQ6IFJlZjxib29sZWFuIHwgdW5kZWZpbmVkPlxuICBncm91cDogR3JvdXBQcm92aWRlXG59XG5cbmV4cG9ydCBjb25zdCBtYWtlR3JvdXBQcm9wcyA9IHByb3BzRmFjdG9yeSh7XG4gIG1vZGVsVmFsdWU6IHtcbiAgICB0eXBlOiBudWxsLFxuICAgIGRlZmF1bHQ6IHVuZGVmaW5lZCxcbiAgfSxcbiAgbXVsdGlwbGU6IEJvb2xlYW4sXG4gIG1hbmRhdG9yeTogW0Jvb2xlYW4sIFN0cmluZ10gYXMgUHJvcFR5cGU8Ym9vbGVhbiB8ICdmb3JjZSc+LFxuICBtYXg6IE51bWJlcixcbiAgc2VsZWN0ZWRDbGFzczogU3RyaW5nLFxuICBkaXNhYmxlZDogQm9vbGVhbixcbn0sICdncm91cCcpXG5cbmV4cG9ydCBjb25zdCBtYWtlR3JvdXBJdGVtUHJvcHMgPSBwcm9wc0ZhY3Rvcnkoe1xuICB2YWx1ZTogbnVsbCxcbiAgZGlzYWJsZWQ6IEJvb2xlYW4sXG4gIHNlbGVjdGVkQ2xhc3M6IFN0cmluZyxcbn0sICdncm91cC1pdGVtJylcblxuZXhwb3J0IGludGVyZmFjZSBHcm91cEl0ZW1Qcm9wcyBleHRlbmRzIEV4dHJhY3RQcm9wVHlwZXM8UmV0dXJuVHlwZTx0eXBlb2YgbWFrZUdyb3VwSXRlbVByb3BzPj4ge1xuICAnb25Hcm91cDpzZWxlY3RlZCc6IEV2ZW50UHJvcDxbeyB2YWx1ZTogYm9vbGVhbiB9XT4gfCB1bmRlZmluZWRcbn1cblxuLy8gQ29tcG9zYWJsZXNcbmV4cG9ydCBmdW5jdGlvbiB1c2VHcm91cEl0ZW0gKFxuICBwcm9wczogR3JvdXBJdGVtUHJvcHMsXG4gIGluamVjdEtleTogSW5qZWN0aW9uS2V5PEdyb3VwUHJvdmlkZT4sXG4gIHJlcXVpcmVkPzogdHJ1ZSxcbik6IEdyb3VwSXRlbVByb3ZpZGVcbmV4cG9ydCBmdW5jdGlvbiB1c2VHcm91cEl0ZW0gKFxuICBwcm9wczogR3JvdXBJdGVtUHJvcHMsXG4gIGluamVjdEtleTogSW5qZWN0aW9uS2V5PEdyb3VwUHJvdmlkZT4sXG4gIHJlcXVpcmVkOiBmYWxzZSxcbik6IEdyb3VwSXRlbVByb3ZpZGUgfCBudWxsXG5leHBvcnQgZnVuY3Rpb24gdXNlR3JvdXBJdGVtIChcbiAgcHJvcHM6IEdyb3VwSXRlbVByb3BzLFxuICBpbmplY3RLZXk6IEluamVjdGlvbktleTxHcm91cFByb3ZpZGU+LFxuICByZXF1aXJlZCA9IHRydWUsXG4pOiBHcm91cEl0ZW1Qcm92aWRlIHwgbnVsbCB7XG4gIGNvbnN0IHZtID0gZ2V0Q3VycmVudEluc3RhbmNlKCd1c2VHcm91cEl0ZW0nKVxuXG4gIGlmICghdm0pIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAnW1Z1ZXRpZnldIHVzZUdyb3VwSXRlbSBjb21wb3NhYmxlIG11c3QgYmUgdXNlZCBpbnNpZGUgYSBjb21wb25lbnQgc2V0dXAgZnVuY3Rpb24nXG4gICAgKVxuICB9XG5cbiAgY29uc3QgaWQgPSBnZXRVaWQoKVxuXG4gIHByb3ZpZGUoU3ltYm9sLmZvcihgJHtpbmplY3RLZXkuZGVzY3JpcHRpb259OmlkYCksIGlkKVxuXG4gIGNvbnN0IGdyb3VwID0gaW5qZWN0KGluamVjdEtleSwgbnVsbClcblxuICBpZiAoIWdyb3VwKSB7XG4gICAgaWYgKCFyZXF1aXJlZCkgcmV0dXJuIGdyb3VwXG5cbiAgICB0aHJvdyBuZXcgRXJyb3IoYFtWdWV0aWZ5XSBDb3VsZCBub3QgZmluZCB1c2VHcm91cCBpbmplY3Rpb24gd2l0aCBzeW1ib2wgJHtpbmplY3RLZXkuZGVzY3JpcHRpb259YClcbiAgfVxuXG4gIGNvbnN0IHZhbHVlID0gdG9SZWYocHJvcHMsICd2YWx1ZScpXG4gIGNvbnN0IGRpc2FibGVkID0gY29tcHV0ZWQoKCkgPT4gISEoZ3JvdXAuZGlzYWJsZWQudmFsdWUgfHwgcHJvcHMuZGlzYWJsZWQpKVxuXG4gIGdyb3VwLnJlZ2lzdGVyKHtcbiAgICBpZCxcbiAgICB2YWx1ZSxcbiAgICBkaXNhYmxlZCxcbiAgfSwgdm0pXG5cbiAgb25CZWZvcmVVbm1vdW50KCgpID0+IHtcbiAgICBncm91cC51bnJlZ2lzdGVyKGlkKVxuICB9KVxuXG4gIGNvbnN0IGlzU2VsZWN0ZWQgPSBjb21wdXRlZCgoKSA9PiB7XG4gICAgcmV0dXJuIGdyb3VwLmlzU2VsZWN0ZWQoaWQpXG4gIH0pXG4gIGNvbnN0IGlzRmlyc3QgPSBjb21wdXRlZCgoKSA9PiB7XG4gICAgcmV0dXJuIGdyb3VwLml0ZW1zLnZhbHVlWzBdLmlkID09PSBpZFxuICB9KVxuICBjb25zdCBpc0xhc3QgPSBjb21wdXRlZCgoKSA9PiB7XG4gICAgcmV0dXJuIGdyb3VwLml0ZW1zLnZhbHVlW2dyb3VwLml0ZW1zLnZhbHVlLmxlbmd0aCAtIDFdLmlkID09PSBpZFxuICB9KVxuXG4gIGNvbnN0IHNlbGVjdGVkQ2xhc3MgPSBjb21wdXRlZCgoKSA9PiBpc1NlbGVjdGVkLnZhbHVlICYmIFtncm91cC5zZWxlY3RlZENsYXNzLnZhbHVlLCBwcm9wcy5zZWxlY3RlZENsYXNzXSlcblxuICB3YXRjaChpc1NlbGVjdGVkLCB2YWx1ZSA9PiB7XG4gICAgdm0uZW1pdCgnZ3JvdXA6c2VsZWN0ZWQnLCB7IHZhbHVlIH0pXG4gIH0sIHsgZmx1c2g6ICdzeW5jJyB9KVxuXG4gIHJldHVybiB7XG4gICAgaWQsXG4gICAgaXNTZWxlY3RlZCxcbiAgICBpc0ZpcnN0LFxuICAgIGlzTGFzdCxcbiAgICB0b2dnbGU6ICgpID0+IGdyb3VwLnNlbGVjdChpZCwgIWlzU2VsZWN0ZWQudmFsdWUpLFxuICAgIHNlbGVjdDogKHZhbHVlOiBib29sZWFuKSA9PiBncm91cC5zZWxlY3QoaWQsIHZhbHVlKSxcbiAgICBzZWxlY3RlZENsYXNzLFxuICAgIHZhbHVlLFxuICAgIGRpc2FibGVkLFxuICAgIGdyb3VwLFxuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB1c2VHcm91cCAoXG4gIHByb3BzOiBHcm91cFByb3BzLFxuICBpbmplY3RLZXk6IEluamVjdGlvbktleTxHcm91cFByb3ZpZGU+XG4pIHtcbiAgbGV0IGlzVW5tb3VudGVkID0gZmFsc2VcbiAgY29uc3QgaXRlbXMgPSByZWFjdGl2ZTxHcm91cEl0ZW1bXT4oW10pXG4gIGNvbnN0IHNlbGVjdGVkID0gdXNlUHJveGllZE1vZGVsKFxuICAgIHByb3BzLFxuICAgICdtb2RlbFZhbHVlJyxcbiAgICBbXSxcbiAgICB2ID0+IHtcbiAgICAgIGlmICh2ID09IG51bGwpIHJldHVybiBbXVxuXG4gICAgICByZXR1cm4gZ2V0SWRzKGl0ZW1zLCB3cmFwSW5BcnJheSh2KSlcbiAgICB9LFxuICAgIHYgPT4ge1xuICAgICAgY29uc3QgYXJyID0gZ2V0VmFsdWVzKGl0ZW1zLCB2KVxuXG4gICAgICByZXR1cm4gcHJvcHMubXVsdGlwbGUgPyBhcnIgOiBhcnJbMF1cbiAgICB9XG4gIClcblxuICBjb25zdCBncm91cFZtID0gZ2V0Q3VycmVudEluc3RhbmNlKCd1c2VHcm91cCcpXG5cbiAgZnVuY3Rpb24gcmVnaXN0ZXIgKGl0ZW06IEdyb3VwSXRlbSwgdm06IENvbXBvbmVudEludGVybmFsSW5zdGFuY2UpIHtcbiAgICAvLyBJcyB0aGVyZSBhIGJldHRlciB3YXkgdG8gZml4IHRoaXMgdHlwaW5nP1xuICAgIGNvbnN0IHVud3JhcHBlZCA9IGl0ZW0gYXMgdW5rbm93biBhcyBVbndyYXBSZWY8R3JvdXBJdGVtPlxuXG4gICAgY29uc3Qga2V5ID0gU3ltYm9sLmZvcihgJHtpbmplY3RLZXkuZGVzY3JpcHRpb259OmlkYClcbiAgICBjb25zdCBjaGlsZHJlbiA9IGZpbmRDaGlsZHJlbldpdGhQcm92aWRlKGtleSwgZ3JvdXBWbT8udm5vZGUpXG4gICAgY29uc3QgaW5kZXggPSBjaGlsZHJlbi5pbmRleE9mKHZtKVxuXG4gICAgaWYgKHVucmVmKHVud3JhcHBlZC52YWx1ZSkgPT0gbnVsbCkge1xuICAgICAgdW53cmFwcGVkLnZhbHVlID0gaW5kZXhcbiAgICAgIHVud3JhcHBlZC51c2VJbmRleEFzVmFsdWUgPSB0cnVlXG4gICAgfVxuXG4gICAgaWYgKGluZGV4ID4gLTEpIHtcbiAgICAgIGl0ZW1zLnNwbGljZShpbmRleCwgMCwgdW53cmFwcGVkKVxuICAgIH0gZWxzZSB7XG4gICAgICBpdGVtcy5wdXNoKHVud3JhcHBlZClcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiB1bnJlZ2lzdGVyIChpZDogbnVtYmVyKSB7XG4gICAgaWYgKGlzVW5tb3VudGVkKSByZXR1cm5cblxuICAgIC8vIFRPRE86IHJlLWV2YWx1YXRlIHRoaXMgbGluZSdzIGltcG9ydGFuY2UgaW4gdGhlIGZ1dHVyZVxuICAgIC8vIHNob3VsZCB3ZSBvbmx5IG1vZGlmeSB0aGUgbW9kZWwgaWYgbWFuZGF0b3J5IGlzIHNldC5cbiAgICAvLyBzZWxlY3RlZC52YWx1ZSA9IHNlbGVjdGVkLnZhbHVlLmZpbHRlcih2ID0+IHYgIT09IGlkKVxuXG4gICAgZm9yY2VNYW5kYXRvcnlWYWx1ZSgpXG5cbiAgICBjb25zdCBpbmRleCA9IGl0ZW1zLmZpbmRJbmRleChpdGVtID0+IGl0ZW0uaWQgPT09IGlkKVxuICAgIGl0ZW1zLnNwbGljZShpbmRleCwgMSlcbiAgfVxuXG4gIC8vIElmIG1hbmRhdG9yeSBhbmQgbm90aGluZyBpcyBzZWxlY3RlZCwgdGhlbiBzZWxlY3QgZmlyc3Qgbm9uLWRpc2FibGVkIGl0ZW1cbiAgZnVuY3Rpb24gZm9yY2VNYW5kYXRvcnlWYWx1ZSAoKSB7XG4gICAgY29uc3QgaXRlbSA9IGl0ZW1zLmZpbmQoaXRlbSA9PiAhaXRlbS5kaXNhYmxlZClcbiAgICBpZiAoaXRlbSAmJiBwcm9wcy5tYW5kYXRvcnkgPT09ICdmb3JjZScgJiYgIXNlbGVjdGVkLnZhbHVlLmxlbmd0aCkge1xuICAgICAgc2VsZWN0ZWQudmFsdWUgPSBbaXRlbS5pZF1cbiAgICB9XG4gIH1cblxuICBvbk1vdW50ZWQoKCkgPT4ge1xuICAgIGZvcmNlTWFuZGF0b3J5VmFsdWUoKVxuICB9KVxuXG4gIG9uQmVmb3JlVW5tb3VudCgoKSA9PiB7XG4gICAgaXNVbm1vdW50ZWQgPSB0cnVlXG4gIH0pXG5cbiAgb25VcGRhdGVkKCgpID0+IHtcbiAgICAvLyAjMTk2NTUgdXBkYXRlIHRoZSBpdGVtcyB0aGF0IHVzZSB0aGUgaW5kZXggYXMgdGhlIHZhbHVlLlxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaXRlbXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmIChpdGVtc1tpXS51c2VJbmRleEFzVmFsdWUpIHtcbiAgICAgICAgaXRlbXNbaV0udmFsdWUgPSBpXG4gICAgICB9XG4gICAgfVxuICB9KVxuXG4gIGZ1bmN0aW9uIHNlbGVjdCAoaWQ6IG51bWJlciwgdmFsdWU/OiBib29sZWFuKSB7XG4gICAgY29uc3QgaXRlbSA9IGl0ZW1zLmZpbmQoaXRlbSA9PiBpdGVtLmlkID09PSBpZClcbiAgICBpZiAodmFsdWUgJiYgaXRlbT8uZGlzYWJsZWQpIHJldHVyblxuXG4gICAgaWYgKHByb3BzLm11bHRpcGxlKSB7XG4gICAgICBjb25zdCBpbnRlcm5hbFZhbHVlID0gc2VsZWN0ZWQudmFsdWUuc2xpY2UoKVxuICAgICAgY29uc3QgaW5kZXggPSBpbnRlcm5hbFZhbHVlLmZpbmRJbmRleCh2ID0+IHYgPT09IGlkKVxuICAgICAgY29uc3QgaXNTZWxlY3RlZCA9IH5pbmRleFxuICAgICAgdmFsdWUgPSB2YWx1ZSA/PyAhaXNTZWxlY3RlZFxuXG4gICAgICAvLyBXZSBjYW4ndCByZW1vdmUgdmFsdWUgaWYgZ3JvdXAgaXNcbiAgICAgIC8vIG1hbmRhdG9yeSwgdmFsdWUgYWxyZWFkeSBleGlzdHMsXG4gICAgICAvLyBhbmQgaXQgaXMgdGhlIG9ubHkgdmFsdWVcbiAgICAgIGlmIChcbiAgICAgICAgaXNTZWxlY3RlZCAmJlxuICAgICAgICBwcm9wcy5tYW5kYXRvcnkgJiZcbiAgICAgICAgaW50ZXJuYWxWYWx1ZS5sZW5ndGggPD0gMVxuICAgICAgKSByZXR1cm5cblxuICAgICAgLy8gV2UgY2FuJ3QgYWRkIHZhbHVlIGlmIGl0IHdvdWxkXG4gICAgICAvLyBjYXVzZSBtYXggbGltaXQgdG8gYmUgZXhjZWVkZWRcbiAgICAgIGlmIChcbiAgICAgICAgIWlzU2VsZWN0ZWQgJiZcbiAgICAgICAgcHJvcHMubWF4ICE9IG51bGwgJiZcbiAgICAgICAgaW50ZXJuYWxWYWx1ZS5sZW5ndGggKyAxID4gcHJvcHMubWF4XG4gICAgICApIHJldHVyblxuXG4gICAgICBpZiAoaW5kZXggPCAwICYmIHZhbHVlKSBpbnRlcm5hbFZhbHVlLnB1c2goaWQpXG4gICAgICBlbHNlIGlmIChpbmRleCA+PSAwICYmICF2YWx1ZSkgaW50ZXJuYWxWYWx1ZS5zcGxpY2UoaW5kZXgsIDEpXG5cbiAgICAgIHNlbGVjdGVkLnZhbHVlID0gaW50ZXJuYWxWYWx1ZVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBpc1NlbGVjdGVkID0gc2VsZWN0ZWQudmFsdWUuaW5jbHVkZXMoaWQpXG4gICAgICBpZiAocHJvcHMubWFuZGF0b3J5ICYmIGlzU2VsZWN0ZWQpIHJldHVyblxuXG4gICAgICBzZWxlY3RlZC52YWx1ZSA9ICh2YWx1ZSA/PyAhaXNTZWxlY3RlZCkgPyBbaWRdIDogW11cbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBzdGVwIChvZmZzZXQ6IG51bWJlcikge1xuICAgIC8vIGdldHRpbmcgYW4gb2Zmc2V0IGZyb20gc2VsZWN0ZWQgdmFsdWUgb2J2aW91c2x5IHdvbid0IHdvcmsgd2l0aCBtdWx0aXBsZSB2YWx1ZXNcbiAgICBpZiAocHJvcHMubXVsdGlwbGUpIGNvbnNvbGVXYXJuKCdUaGlzIG1ldGhvZCBpcyBub3Qgc3VwcG9ydGVkIHdoZW4gdXNpbmcgXCJtdWx0aXBsZVwiIHByb3AnKVxuXG4gICAgaWYgKCFzZWxlY3RlZC52YWx1ZS5sZW5ndGgpIHtcbiAgICAgIGNvbnN0IGl0ZW0gPSBpdGVtcy5maW5kKGl0ZW0gPT4gIWl0ZW0uZGlzYWJsZWQpXG4gICAgICBpdGVtICYmIChzZWxlY3RlZC52YWx1ZSA9IFtpdGVtLmlkXSlcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgY3VycmVudElkID0gc2VsZWN0ZWQudmFsdWVbMF1cbiAgICAgIGNvbnN0IGN1cnJlbnRJbmRleCA9IGl0ZW1zLmZpbmRJbmRleChpID0+IGkuaWQgPT09IGN1cnJlbnRJZClcblxuICAgICAgbGV0IG5ld0luZGV4ID0gKGN1cnJlbnRJbmRleCArIG9mZnNldCkgJSBpdGVtcy5sZW5ndGhcbiAgICAgIGxldCBuZXdJdGVtID0gaXRlbXNbbmV3SW5kZXhdXG5cbiAgICAgIHdoaWxlIChuZXdJdGVtLmRpc2FibGVkICYmIG5ld0luZGV4ICE9PSBjdXJyZW50SW5kZXgpIHtcbiAgICAgICAgbmV3SW5kZXggPSAobmV3SW5kZXggKyBvZmZzZXQpICUgaXRlbXMubGVuZ3RoXG4gICAgICAgIG5ld0l0ZW0gPSBpdGVtc1tuZXdJbmRleF1cbiAgICAgIH1cblxuICAgICAgaWYgKG5ld0l0ZW0uZGlzYWJsZWQpIHJldHVyblxuXG4gICAgICBzZWxlY3RlZC52YWx1ZSA9IFtpdGVtc1tuZXdJbmRleF0uaWRdXG4gICAgfVxuICB9XG5cbiAgY29uc3Qgc3RhdGU6IEdyb3VwUHJvdmlkZSA9IHtcbiAgICByZWdpc3RlcixcbiAgICB1bnJlZ2lzdGVyLFxuICAgIHNlbGVjdGVkLFxuICAgIHNlbGVjdCxcbiAgICBkaXNhYmxlZDogdG9SZWYocHJvcHMsICdkaXNhYmxlZCcpLFxuICAgIHByZXY6ICgpID0+IHN0ZXAoaXRlbXMubGVuZ3RoIC0gMSksXG4gICAgbmV4dDogKCkgPT4gc3RlcCgxKSxcbiAgICBpc1NlbGVjdGVkOiAoaWQ6IG51bWJlcikgPT4gc2VsZWN0ZWQudmFsdWUuaW5jbHVkZXMoaWQpLFxuICAgIHNlbGVjdGVkQ2xhc3M6IGNvbXB1dGVkKCgpID0+IHByb3BzLnNlbGVjdGVkQ2xhc3MpLFxuICAgIGl0ZW1zOiBjb21wdXRlZCgoKSA9PiBpdGVtcyksXG4gICAgZ2V0SXRlbUluZGV4OiAodmFsdWU6IHVua25vd24pID0+IGdldEl0ZW1JbmRleChpdGVtcywgdmFsdWUpLFxuICB9XG5cbiAgcHJvdmlkZShpbmplY3RLZXksIHN0YXRlKVxuXG4gIHJldHVybiBzdGF0ZVxufVxuXG5mdW5jdGlvbiBnZXRJdGVtSW5kZXggKGl0ZW1zOiBVbndyYXBSZWY8R3JvdXBJdGVtW10+LCB2YWx1ZTogdW5rbm93bikge1xuICBjb25zdCBpZHMgPSBnZXRJZHMoaXRlbXMsIFt2YWx1ZV0pXG5cbiAgaWYgKCFpZHMubGVuZ3RoKSByZXR1cm4gLTFcblxuICByZXR1cm4gaXRlbXMuZmluZEluZGV4KGl0ZW0gPT4gaXRlbS5pZCA9PT0gaWRzWzBdKVxufVxuXG5mdW5jdGlvbiBnZXRJZHMgKGl0ZW1zOiBVbndyYXBSZWY8R3JvdXBJdGVtW10+LCBtb2RlbFZhbHVlOiBhbnlbXSkge1xuICBjb25zdCBpZHM6IG51bWJlcltdID0gW11cblxuICBtb2RlbFZhbHVlLmZvckVhY2godmFsdWUgPT4ge1xuICAgIGNvbnN0IGl0ZW0gPSBpdGVtcy5maW5kKGl0ZW0gPT4gZGVlcEVxdWFsKHZhbHVlLCBpdGVtLnZhbHVlKSlcbiAgICBjb25zdCBpdGVtQnlJbmRleCA9IGl0ZW1zW3ZhbHVlXVxuXG4gICAgaWYgKGl0ZW0/LnZhbHVlICE9IG51bGwpIHtcbiAgICAgIGlkcy5wdXNoKGl0ZW0uaWQpXG4gICAgfSBlbHNlIGlmIChpdGVtQnlJbmRleCAhPSBudWxsKSB7XG4gICAgICBpZHMucHVzaChpdGVtQnlJbmRleC5pZClcbiAgICB9XG4gIH0pXG5cbiAgcmV0dXJuIGlkc1xufVxuXG5mdW5jdGlvbiBnZXRWYWx1ZXMgKGl0ZW1zOiBVbndyYXBSZWY8R3JvdXBJdGVtW10+LCBpZHM6IGFueVtdKSB7XG4gIGNvbnN0IHZhbHVlczogdW5rbm93bltdID0gW11cblxuICBpZHMuZm9yRWFjaChpZCA9PiB7XG4gICAgY29uc3QgaXRlbUluZGV4ID0gaXRlbXMuZmluZEluZGV4KGl0ZW0gPT4gaXRlbS5pZCA9PT0gaWQpXG4gICAgaWYgKH5pdGVtSW5kZXgpIHtcbiAgICAgIGNvbnN0IGl0ZW0gPSBpdGVtc1tpdGVtSW5kZXhdXG4gICAgICB2YWx1ZXMucHVzaChpdGVtLnZhbHVlICE9IG51bGwgPyBpdGVtLnZhbHVlIDogaXRlbUluZGV4KVxuICAgIH1cbiAgfSlcblxuICByZXR1cm4gdmFsdWVzXG59XG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQUEsU0FDU0EsZUFBZSw4QkFFeEI7QUFDQSxTQUFTQyxRQUFRLEVBQUVDLE1BQU0sRUFBRUMsZUFBZSxFQUFFQyxTQUFTLEVBQUVDLFNBQVMsRUFBRUMsT0FBTyxFQUFFQyxRQUFRLEVBQUVDLEtBQUssRUFBRUMsS0FBSyxFQUFFQyxLQUFLLFFBQVEsS0FBSztBQUFBLFNBQzVHQyxXQUFXLEVBQUVDLFNBQVMsRUFBRUMsdUJBQXVCLEVBQUVDLGtCQUFrQixFQUFFQyxNQUFNLEVBQUVDLFlBQVksRUFBRUMsV0FBVyw2QkFFL0c7QUFvREEsT0FBTyxNQUFNQyxjQUFjLEdBQUdGLFlBQVksQ0FBQztFQUN6Q0csVUFBVSxFQUFFO0lBQ1ZDLElBQUksRUFBRSxJQUFJO0lBQ1ZDLE9BQU8sRUFBRUM7RUFDWCxDQUFDO0VBQ0RDLFFBQVEsRUFBRUMsT0FBTztFQUNqQkMsU0FBUyxFQUFFLENBQUNELE9BQU8sRUFBRUUsTUFBTSxDQUFnQztFQUMzREMsR0FBRyxFQUFFQyxNQUFNO0VBQ1hDLGFBQWEsRUFBRUgsTUFBTTtFQUNyQkksUUFBUSxFQUFFTjtBQUNaLENBQUMsRUFBRSxPQUFPLENBQUM7QUFFWCxPQUFPLE1BQU1PLGtCQUFrQixHQUFHZixZQUFZLENBQUM7RUFDN0NnQixLQUFLLEVBQUUsSUFBSTtFQUNYRixRQUFRLEVBQUVOLE9BQU87RUFDakJLLGFBQWEsRUFBRUg7QUFDakIsQ0FBQyxFQUFFLFlBQVksQ0FBQzs7QUFNaEI7O0FBV0EsT0FBTyxTQUFTTyxZQUFZQSxDQUMxQkMsS0FBcUIsRUFDckJDLFNBQXFDLEVBRVo7RUFBQSxJQUR6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T0EsS0FBSztBQUNkO0FBRUEsU0FBU0csWUFBWUEsQ0FBRXhDLEtBQTZCLEVBQUVsQixLQUFjLEVBQUU7RUFDcEUsTUFBTTJELEdBQUcsR0FBRy9CLE1BQU0sQ0FBQ1YsS0FBSyxFQUFFLENBQUNsQixLQUFLLENBQUMsQ0FBQztFQUVsQyxJQUFJLENBQUMyRCxHQUFHLENBQUNyRCxNQUFNLEVBQUUsT0FBTyxDQUFDLENBQUM7RUFFMUIsT0FBT1ksS0FBSyxDQUFDeUIsU0FBUyxDQUFDWCxJQUFJLElBQUlBLElBQUksQ0FBQ3ZCLEVBQUUsS0FBS2tELEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUNwRDtBQUVBLFNBQVMvQixNQUFNQSxDQUFFVixLQUE2QixFQUFFL0IsVUFBaUIsRUFBRTtFQUNqRSxNQUFNd0UsR0FBYSxHQUFHLEVBQUU7RUFFeEJ4RSxVQUFVLENBQUN5RSxPQUFPLENBQUM1RCxLQUFLLElBQUk7SUFDMUIsTUFBTWdDLElBQUksR0FBR2QsS0FBSyxDQUFDMEIsSUFBSSxDQUFDWixJQUFJLElBQUlwRCxTQUFTLENBQUNvQixLQUFLLEVBQUVnQyxJQUFJLENBQUNoQyxLQUFLLENBQUMsQ0FBQztJQUM3RCxNQUFNNkQsV0FBVyxHQUFHM0MsS0FBSyxDQUFDbEIsS0FBSyxDQUFDO0lBRWhDLElBQUlnQyxJQUFJLEVBQUVoQyxLQUFLLElBQUksSUFBSSxFQUFFO01BQ3ZCMkQsR0FBRyxDQUFDbEIsSUFBSSxDQUFDVCxJQUFJLENBQUN2QixFQUFFLENBQUM7SUFDbkIsQ0FBQyxNQUFNLElBQUlvRCxXQUFXLElBQUksSUFBSSxFQUFFO01BQzlCRixHQUFHLENBQUNsQixJQUFJLENBQUNvQixXQUFXLENBQUNwRCxFQUFFLENBQUM7SUFDMUI7RUFDRixDQUFDLENBQUM7RUFFRixPQUFPa0QsR0FBRztBQUNaO0FBRUEsU0FBUzdCLFNBQVNBLENBQUVaLEtBQTZCLEVBQUV5QyxHQUFVLEVBQUU7RUFDN0QsTUFBTUcsTUFBaUIsR0FBRyxFQUFFO0VBRTVCSCxHQUFHLENBQUNDLE9BQU8sQ0FBQ25ELEVBQUUsSUFBSTtJQUNoQixNQUFNc0QsU0FBUyxHQUFHN0MsS0FBSyxDQUFDeUIsU0FBUyxDQUFDWCxJQUFJLElBQUlBLElBQUksQ0FBQ3ZCLEVBQUUsS0FBS0EsRUFBRSxDQUFDO0lBQ3pELElBQUksQ0FBQ3NELFNBQVMsRUFBRTtNQUNkLE1BQU0vQixJQUFJLEdBQUdkLEtBQUssQ0FBQzZDLFNBQVMsQ0FBQztNQUM3QkQsTUFBTSxDQUFDckIsSUFBSSxDQUFDVCxJQUFJLENBQUNoQyxLQUFLLElBQUksSUFBSSxHQUFHZ0MsSUFBSSxDQUFDaEMsS0FBSyxHQUFHK0QsU0FBUyxDQUFDO0lBQzFEO0VBQ0YsQ0FBQyxDQUFDO0VBRUYsT0FBT0QsTUFBTTtBQUNmIiwiaWdub3JlTGlzdCI6W10sInhfZ29vZ2xlX2lnbm9yZUxpc3QiOlswXX0=