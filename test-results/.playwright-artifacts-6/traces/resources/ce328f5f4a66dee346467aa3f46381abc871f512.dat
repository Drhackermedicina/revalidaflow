// Types
// eslint-disable-line vue/prefer-import-from-vue

/**
 * Creates a factory function for props definitions.
 * This is used to define props in a composable then override
 * default values in an implementing component.
 *
 * @example Simplified signature
 * (props: Props) => (defaults?: Record<keyof props, any>) => Props
 *
 * @example Usage
 * const makeProps = propsFactory({
 *   foo: String,
 * })
 *
 * defineComponent({
 *   props: {
 *     ...makeProps({
 *       foo: 'a',
 *     }),
 *   },
 *   setup (props) {
 *     // would be "string | undefined", now "string" because a default has been provided
 *     props.foo
 *   },
 * }
 */

export function propsFactory(props, source) {
  return defaults => {
    return Object.keys(props).reduce((obj, prop) => {
      const isObjectDefinition = typeof props[prop] === 'object' && props[prop] != null && !Array.isArray(props[prop]);
      const definition = isObjectDefinition ? props[prop] : {
        type: props[prop]
      };
      if (defaults && prop in defaults) {
        obj[prop] = {
          ...definition,
          default: defaults[prop]
        };
      } else {
        obj[prop] = definition;
      }
      if (source && !obj[prop].source) {
        obj[prop].source = source;
      }
      return obj;
    }, {});
  };
}

/**
 * Like `Partial<T>` but doesn't care what the value is
 */

// Copied from Vue
                                         
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicHJvcHNGYWN0b3J5Lm1qcyIsIm5hbWVzIjpbInByb3BzRmFjdG9yeSIsInByb3BzIiwic291cmNlIiwiZGVmYXVsdHMiLCJPYmplY3QiLCJrZXlzIiwicmVkdWNlIiwib2JqIiwicHJvcCIsImlzT2JqZWN0RGVmaW5pdGlvbiIsIkFycmF5IiwiaXNBcnJheSIsImRlZmluaXRpb24iLCJ0eXBlIiwiZGVmYXVsdCJdLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy91dGlsL3Byb3BzRmFjdG9yeS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBUeXBlc1xuaW1wb3J0IHR5cGUgeyBJZkFueSB9IGZyb20gJ0B2dWUvc2hhcmVkJyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIHZ1ZS9wcmVmZXItaW1wb3J0LWZyb20tdnVlXG5pbXBvcnQgdHlwZSB7IENvbXBvbmVudE9iamVjdFByb3BzT3B0aW9ucywgUHJvcCwgUHJvcFR5cGUgfSBmcm9tICd2dWUnXG5cbi8qKlxuICogQ3JlYXRlcyBhIGZhY3RvcnkgZnVuY3Rpb24gZm9yIHByb3BzIGRlZmluaXRpb25zLlxuICogVGhpcyBpcyB1c2VkIHRvIGRlZmluZSBwcm9wcyBpbiBhIGNvbXBvc2FibGUgdGhlbiBvdmVycmlkZVxuICogZGVmYXVsdCB2YWx1ZXMgaW4gYW4gaW1wbGVtZW50aW5nIGNvbXBvbmVudC5cbiAqXG4gKiBAZXhhbXBsZSBTaW1wbGlmaWVkIHNpZ25hdHVyZVxuICogKHByb3BzOiBQcm9wcykgPT4gKGRlZmF1bHRzPzogUmVjb3JkPGtleW9mIHByb3BzLCBhbnk+KSA9PiBQcm9wc1xuICpcbiAqIEBleGFtcGxlIFVzYWdlXG4gKiBjb25zdCBtYWtlUHJvcHMgPSBwcm9wc0ZhY3Rvcnkoe1xuICogICBmb286IFN0cmluZyxcbiAqIH0pXG4gKlxuICogZGVmaW5lQ29tcG9uZW50KHtcbiAqICAgcHJvcHM6IHtcbiAqICAgICAuLi5tYWtlUHJvcHMoe1xuICogICAgICAgZm9vOiAnYScsXG4gKiAgICAgfSksXG4gKiAgIH0sXG4gKiAgIHNldHVwIChwcm9wcykge1xuICogICAgIC8vIHdvdWxkIGJlIFwic3RyaW5nIHwgdW5kZWZpbmVkXCIsIG5vdyBcInN0cmluZ1wiIGJlY2F1c2UgYSBkZWZhdWx0IGhhcyBiZWVuIHByb3ZpZGVkXG4gKiAgICAgcHJvcHMuZm9vXG4gKiAgIH0sXG4gKiB9XG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHByb3BzRmFjdG9yeTxcbiAgUHJvcHNPcHRpb25zIGV4dGVuZHMgQ29tcG9uZW50T2JqZWN0UHJvcHNPcHRpb25zXG4+IChwcm9wczogUHJvcHNPcHRpb25zLCBzb3VyY2U6IHN0cmluZykge1xuICByZXR1cm4gPERlZmF1bHRzIGV4dGVuZHMgUGFydGlhbEtleXM8UHJvcHNPcHRpb25zPiA9IHt9PihcbiAgICBkZWZhdWx0cz86IERlZmF1bHRzXG4gICk6IEFwcGVuZERlZmF1bHQ8UHJvcHNPcHRpb25zLCBEZWZhdWx0cz4gPT4ge1xuICAgIHJldHVybiBPYmplY3Qua2V5cyhwcm9wcykucmVkdWNlPGFueT4oKG9iaiwgcHJvcCkgPT4ge1xuICAgICAgY29uc3QgaXNPYmplY3REZWZpbml0aW9uID0gdHlwZW9mIHByb3BzW3Byb3BdID09PSAnb2JqZWN0JyAmJiBwcm9wc1twcm9wXSAhPSBudWxsICYmICFBcnJheS5pc0FycmF5KHByb3BzW3Byb3BdKVxuICAgICAgY29uc3QgZGVmaW5pdGlvbiA9IGlzT2JqZWN0RGVmaW5pdGlvbiA/IHByb3BzW3Byb3BdIDogeyB0eXBlOiBwcm9wc1twcm9wXSB9XG5cbiAgICAgIGlmIChkZWZhdWx0cyAmJiBwcm9wIGluIGRlZmF1bHRzKSB7XG4gICAgICAgIG9ialtwcm9wXSA9IHtcbiAgICAgICAgICAuLi5kZWZpbml0aW9uLFxuICAgICAgICAgIGRlZmF1bHQ6IGRlZmF1bHRzW3Byb3BdLFxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBvYmpbcHJvcF0gPSBkZWZpbml0aW9uXG4gICAgICB9XG5cbiAgICAgIGlmIChzb3VyY2UgJiYgIW9ialtwcm9wXS5zb3VyY2UpIHtcbiAgICAgICAgb2JqW3Byb3BdLnNvdXJjZSA9IHNvdXJjZVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gb2JqXG4gICAgfSwge30pXG4gIH1cbn1cblxudHlwZSBBcHBlbmREZWZhdWx0PFQgZXh0ZW5kcyBDb21wb25lbnRPYmplY3RQcm9wc09wdGlvbnMsIEQgZXh0ZW5kcyBQYXJ0aWFsS2V5czxUPj4gPSB7XG4gIFtQIGluIGtleW9mIFRdLT86IHVua25vd24gZXh0ZW5kcyBEW1BdXG4gICAgPyBUW1BdXG4gICAgOiBUW1BdIGV4dGVuZHMgUmVjb3JkPHN0cmluZywgdW5rbm93bj5cbiAgICAgID8gT21pdDxUW1BdLCAndHlwZScgfCAnZGVmYXVsdCc+ICYge1xuICAgICAgICB0eXBlOiBQcm9wVHlwZTxNZXJnZVR5cGVEZWZhdWx0PFRbUF0sIERbUF0+PlxuICAgICAgICBkZWZhdWx0OiBNZXJnZURlZmF1bHQ8VFtQXSwgRFtQXT5cbiAgICAgIH1cbiAgICAgIDoge1xuICAgICAgICB0eXBlOiBQcm9wVHlwZTxNZXJnZVR5cGVEZWZhdWx0PFRbUF0sIERbUF0+PlxuICAgICAgICBkZWZhdWx0OiBNZXJnZURlZmF1bHQ8VFtQXSwgRFtQXT5cbiAgICAgIH1cbn1cblxudHlwZSBNZXJnZVR5cGVEZWZhdWx0PFQsIEQsIFAgPSBJbmZlclByb3BUeXBlPFQ+PiA9IHVua25vd24gZXh0ZW5kcyBEXG4gID8gUFxuICA6IChQIHwgRClcbnR5cGUgTWVyZ2VEZWZhdWx0PFQsIEQsIFAgPSBJbmZlclByb3BUeXBlPFQ+PiA9IHVua25vd24gZXh0ZW5kcyBEXG4gID8gUFxuICA6IChOb25OdWxsYWJsZTxQPiB8IEQpXG5cbi8qKlxuICogTGlrZSBgUGFydGlhbDxUPmAgYnV0IGRvZXNuJ3QgY2FyZSB3aGF0IHRoZSB2YWx1ZSBpc1xuICovXG50eXBlIFBhcnRpYWxLZXlzPFQ+ID0geyBbUCBpbiBrZXlvZiBUXT86IHVua25vd24gfVxuXG4vLyBDb3BpZWQgZnJvbSBWdWVcbnR5cGUgSW5mZXJQcm9wVHlwZTxUPiA9IFtUXSBleHRlbmRzIFtudWxsXVxuICA/IGFueSAvLyBudWxsICYgdHJ1ZSB3b3VsZCBmYWlsIHRvIGluZmVyXG4gIDogW1RdIGV4dGVuZHMgW3sgdHlwZTogbnVsbCB8IHRydWUgfV1cbiAgICAvLyBBcyBUUyBpc3N1ZSBodHRwczovL2dpdGh1Yi5jb20vTWljcm9zb2Z0L1R5cGVTY3JpcHQvaXNzdWVzLzE0ODI5XG4gICAgLy8gc29tZWhvdyBgT2JqZWN0Q29uc3RydWN0b3JgIHdoZW4gaW5mZXJyZWQgZnJvbSB7ICgpOiBUIH0gYmVjb21lcyBgYW55YFxuICAgIC8vIGBCb29sZWFuQ29uc3RydWN0b3JgIHdoZW4gaW5mZXJyZWQgZnJvbSBQcm9wQ29uc3RydWN0b3Iod2l0aCBQcm9wTWV0aG9kKSBiZWNvbWVzIGBCb29sZWFuYFxuICAgID8gYW55XG4gICAgOiBbVF0gZXh0ZW5kcyBbT2JqZWN0Q29uc3RydWN0b3IgfCB7IHR5cGU6IE9iamVjdENvbnN0cnVjdG9yIH1dXG4gICAgICA/IFJlY29yZDxzdHJpbmcsIGFueT5cbiAgICAgIDogW1RdIGV4dGVuZHMgW0Jvb2xlYW5Db25zdHJ1Y3RvciB8IHsgdHlwZTogQm9vbGVhbkNvbnN0cnVjdG9yIH1dXG4gICAgICAgID8gYm9vbGVhblxuICAgICAgICA6IFtUXSBleHRlbmRzIFtEYXRlQ29uc3RydWN0b3IgfCB7IHR5cGU6IERhdGVDb25zdHJ1Y3RvciB9XVxuICAgICAgICAgID8gRGF0ZVxuICAgICAgICAgIDogW1RdIGV4dGVuZHMgWyhpbmZlciBVKVtdIHwgeyB0eXBlOiAoaW5mZXIgVSlbXSB9XVxuICAgICAgICAgICAgPyBVIGV4dGVuZHMgRGF0ZUNvbnN0cnVjdG9yXG4gICAgICAgICAgICAgID8gRGF0ZSB8IEluZmVyUHJvcFR5cGU8VT5cbiAgICAgICAgICAgICAgOiBJbmZlclByb3BUeXBlPFU+XG4gICAgICAgICAgICA6IFtUXSBleHRlbmRzIFtQcm9wPGluZmVyIFYsIGluZmVyIEQ+XVxuICAgICAgICAgICAgICA/IHVua25vd24gZXh0ZW5kcyBWXG4gICAgICAgICAgICAgICAgPyBJZkFueTxWLCBWLCBEPlxuICAgICAgICAgICAgICAgIDogVlxuICAgICAgICAgICAgICA6IFRcbiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDeUM7O0FBR3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLE9BQU8sU0FBU0EsWUFBWUEsQ0FFekJDLEtBQW1CLEVBQUVDLE1BQWMsRUFBRTtFQUN0QyxPQUNFQyxRQUFtQixJQUN1QjtJQUMxQyxPQUFPQyxNQUFNLENBQUNDLElBQUksQ0FBQ0osS0FBSyxDQUFDLENBQUNLLE1BQU0sQ0FBTSxDQUFDQyxHQUFHLEVBQUVDLElBQUksS0FBSztNQUNuRCxNQUFNQyxrQkFBa0IsR0FBRyxPQUFPUixLQUFLLENBQUNPLElBQUksQ0FBQyxLQUFLLFFBQVEsSUFBSVAsS0FBSyxDQUFDTyxJQUFJLENBQUMsSUFBSSxJQUFJLElBQUksQ0FBQ0UsS0FBSyxDQUFDQyxPQUFPLENBQUNWLEtBQUssQ0FBQ08sSUFBSSxDQUFDLENBQUM7TUFDaEgsTUFBTUksVUFBVSxHQUFHSCxrQkFBa0IsR0FBR1IsS0FBSyxDQUFDTyxJQUFJLENBQUMsR0FBRztRQUFFSyxJQUFJLEVBQUVaLEtBQUssQ0FBQ08sSUFBSTtNQUFFLENBQUM7TUFFM0UsSUFBSUwsUUFBUSxJQUFJSyxJQUFJLElBQUlMLFFBQVEsRUFBRTtRQUNoQ0ksR0FBRyxDQUFDQyxJQUFJLENBQUMsR0FBRztVQUNWLEdBQUdJLFVBQVU7VUFDYkUsT0FBTyxFQUFFWCxRQUFRLENBQUNLLElBQUk7UUFDeEIsQ0FBQztNQUNILENBQUMsTUFBTTtRQUNMRCxHQUFHLENBQUNDLElBQUksQ0FBQyxHQUFHSSxVQUFVO01BQ3hCO01BRUEsSUFBSVYsTUFBTSxJQUFJLENBQUNLLEdBQUcsQ0FBQ0MsSUFBSSxDQUFDLENBQUNOLE1BQU0sRUFBRTtRQUMvQkssR0FBRyxDQUFDQyxJQUFJLENBQUMsQ0FBQ04sTUFBTSxHQUFHQSxNQUFNO01BQzNCO01BRUEsT0FBT0ssR0FBRztJQUNaLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztFQUNSLENBQUM7QUFDSDs7QUF1QkE7QUFDQTtBQUNBOztBQUdBIiwiaWdub3JlTGlzdCI6W10sInhfZ29vZ2xlX2lnbm9yZUxpc3QiOlswXX0=